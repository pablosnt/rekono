name: Software Supply Chain
on:
    workflow_dispatch:
    schedule:
      - cron: '0 0 * * *'
    pull_request:

jobs:
  legitify:
    name: Legitify
    runs-on: ubuntu-latest
    environment: github
    steps:
      - name: Legitify
        uses: Legit-Labs/legitify@038aa49473a6974a3ef79f6c76b949b689d23282
        with:
          github_token: ${{ secrets.ADMIN_PAT }}
          analyze_self_only: true
          upload_code_scanning: true
          scorecard: yes
          artifact_name: legitify

  chain-bench:
    name: Chain-Bench
    runs-on: ubuntu-latest
    environment: github
    steps:
      - name: Chain Bench
        uses: aquasecurity/chain-bench-action@cd35ac2e4470006fc9bbbbcd6c328edb61b72332
        with:
          repository-url: ${{ github.server_url }}/${{ github.repository }}
          github-token: ${{ secrets.ADMIN_PAT }}
