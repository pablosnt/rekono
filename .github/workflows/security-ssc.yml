name: Software Supply Chain
on:
    workflow_dispatch:
    schedule:
      - cron: '0 0 * * *'
    pull_request:

jobs:
  scanners:
    name: Scanners
    runs-on: ubuntu-latest
    environment: github
    steps:
      - name: Legitify
        uses: Legit-Labs/legitify@038aa49473a6974a3ef79f6c76b949b689d23282
        with:
          github_token: ${{ secrets.ADMIN_PAT }}
          analyze_self_only: true
          artifact_name: legitify

      - name: Chain Bench
        id: chain-bench
        uses: aquasecurity/chain-bench-action@cd35ac2e4470006fc9bbbbcd6c328edb61b72332
        with:
          repository-url: ${{ github.server_url }}/${{ github.repository }}
          github-token: ${{ secrets.ADMIN_PAT }}
